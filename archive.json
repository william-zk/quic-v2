{
  "magic": "E!vIA5L86J2I",
  "timestamp": "2022-01-06T00:29:38.552537+00:00",
  "repo": "quicwg/quic-v2",
  "labels": [
    {
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "name": "duplicate",
      "description": "This issue or pull request already exists",
      "color": "cfd3d7"
    },
    {
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    },
    {
      "name": "help wanted",
      "description": "Extra attention is needed",
      "color": "008672"
    },
    {
      "name": "good first issue",
      "description": "Good for newcomers",
      "color": "7057ff"
    },
    {
      "name": "invalid",
      "description": "This doesn't seem right",
      "color": "e4e669"
    },
    {
      "name": "question",
      "description": "Further information is requested",
      "color": "d876e3"
    },
    {
      "name": "wontfix",
      "description": "This will not be worked on",
      "color": "ffffff"
    }
  ],
  "issues": [
    {
      "number": 1,
      "id": "MDU6SXNzdWU4NjUyODQ1Nzc=",
      "title": "Add a provisional version",
      "url": "https://github.com/quicwg/quic-v2/issues/1",
      "state": "CLOSED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Because VN is still a moving target, and the WG might want to increase the diff from v1, the draft should specify an experimental version number to use until RFC, at which point we can switch over to 0x00000002.",
      "createdAt": "2021-04-22T18:19:48Z",
      "updatedAt": "2021-04-23T21:05:21Z",
      "closedAt": "2021-04-23T21:05:21Z",
      "comments": [
        {
          "author": "huitema",
          "authorAssociation": "NONE",
          "body": "Yes. Something like \"0xFF0100nn\"...",
          "createdAt": "2021-04-23T19:41:14Z",
          "updatedAt": "2021-04-23T19:41:14Z"
        }
      ]
    },
    {
      "number": 2,
      "id": "MDU6SXNzdWU4NjYzODU0MzU=",
      "title": "Retry protection key",
      "url": "https://github.com/quicwg/quic-v2/issues/2",
      "state": "CLOSED",
      "author": "huitema",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "The draft defines a V2 salt. Should it also define a V2 retry protection key?",
      "createdAt": "2021-04-23T19:45:48Z",
      "updatedAt": "2021-04-26T19:28:16Z",
      "closedAt": "2021-04-26T19:28:16Z",
      "comments": []
    },
    {
      "number": 3,
      "id": "MDU6SXNzdWU4NjgwNzI2NDA=",
      "title": "Update Labels",
      "url": "https://github.com/quicwg/quic-v2/issues/3",
      "state": "CLOSED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "We can get complete key separation between quic v1 and v2 by simply changing the labels used as HKDF inputs.",
      "createdAt": "2021-04-26T19:31:43Z",
      "updatedAt": "2021-04-26T19:56:58Z",
      "closedAt": "2021-04-26T19:56:58Z",
      "comments": [
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "9.6 of quic-tls says we should, so this is inflight.",
          "createdAt": "2021-04-26T19:46:25Z",
          "updatedAt": "2021-04-26T19:46:25Z"
        }
      ]
    },
    {
      "number": 4,
      "id": "MDU6SXNzdWU4NjkzMzQxMDI=",
      "title": "Different version number",
      "url": "https://github.com/quicwg/quic-v2/issues/4",
      "state": "CLOSED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "@martinthomson wants to use some other version number, not 2. I'd have to retitle the draft, but other than that I don't have a strong feeling about it.",
      "createdAt": "2021-04-27T23:06:09Z",
      "updatedAt": "2021-04-28T16:04:49Z",
      "closedAt": "2021-04-28T16:04:49Z",
      "comments": [
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "Upon further reflection, this is a pretty fundamental question: are QUIC versions incremental, where in general version N comes after N-1 and is implied to be \"better\", or are they randomly spread over the space with no clear temporal or quality relationship?",
          "createdAt": "2021-04-28T04:35:31Z",
          "updatedAt": "2021-04-28T04:35:31Z"
        },
        {
          "author": "kazuho",
          "authorAssociation": "MEMBER",
          "body": "> are QUIC versions incremental, where in general version N comes after N-1 and is implied to be \"better\", or are they randomly spread over the space with no clear temporal or quality relationship?\r\n\r\nI think this is the framing that we should use for reaching a resolution.\r\n\r\nThe reason we chose \"HTTP/3\" as the name for the HTTP binding for QUIC is because people tend to believe that increments on version number represent something better. It'd be hard if not impossible to change that perception.\r\n\r\nComparing to that, this \"v2\" draft is not something meant to be better than v1 - it is merely an alternative wire encoding of v1.\r\n\r\nBased on that, I tend to agree with @martinthomson; it would be less confusing to people if we choose a large random number than \"v2.\"",
          "createdAt": "2021-04-28T04:46:09Z",
          "updatedAt": "2021-04-28T04:46:09Z"
        }
      ]
    },
    {
      "number": 5,
      "id": "MDU6SXNzdWU4Njk0ODEwNTI=",
      "title": "ALPN",
      "url": "https://github.com/quicwg/quic-v2/issues/5",
      "state": "CLOSED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "on slack some are saying we should roll a new h3 ALPN for running over quicv2. I cannot quite follow the argument but this is a better venue for the discussion.",
      "createdAt": "2021-04-28T04:26:07Z",
      "updatedAt": "2021-06-02T18:22:48Z",
      "closedAt": "2021-06-02T18:22:48Z",
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "You definitely need a new specification, because a different QUIC version might not be suitable.  You either say:\r\n\r\n* h3 can be used with QUICv2, or\r\n* h3q2 (or whatever new string you like) identifies HTTP/3 when running over QUICv2.\r\n\r\nThere are lots of arguments as to why you might choose to do one or the other.",
          "createdAt": "2021-04-28T04:33:18Z",
          "updatedAt": "2021-04-28T04:33:18Z"
        },
        {
          "author": "LPardue",
          "authorAssociation": "MEMBER",
          "body": "I'm swayed more toward a new ALP.N at the moment ",
          "createdAt": "2021-04-28T11:34:38Z",
          "updatedAt": "2021-04-28T11:34:38Z"
        },
        {
          "author": "LPardue",
          "authorAssociation": "MEMBER",
          "body": "FWIW we painted ourselves into this corner. We punting on the problem and simply tied H3 to v1. Now we are actively trying to solve VN we might be able to pay back the tech debt. For example, a document that updates H3 to say that it can work over versions compatible with v1. Incompatible versions could still need to defined as a new application mapping,",
          "createdAt": "2021-04-28T12:44:35Z",
          "updatedAt": "2021-04-28T12:44:35Z"
        },
        {
          "author": "RyanTheOptimist",
          "authorAssociation": "NONE",
          "body": "Whatever we do, I think we need to ensure that servers can give sufficient information to clients via Alt-Svc so that the client can pick a compatible version (if any) and avoid VN. This could, then, be solved via Alt-Svc layer or via ALPN, but I think this is any important property.",
          "createdAt": "2021-04-28T18:39:05Z",
          "updatedAt": "2021-04-28T18:39:05Z"
        },
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "Well \"avoiding VN\" is only important to the extent that we can't do compatible VN.",
          "createdAt": "2021-04-28T18:50:54Z",
          "updatedAt": "2021-04-28T18:50:54Z"
        },
        {
          "author": "RyanTheOptimist",
          "authorAssociation": "NONE",
          "body": "I think we want to allow the existence of a server that only supports v2 and servers that only support v1.... and clients that only support v2 and clients that only support v1. Given this, there will be client : server pairs which do not support any mutually compatible options. It seems like it would be desirable for clients to be able to deduce this from Alt-Svc without needing to see the QUIC connection to the server fail?",
          "createdAt": "2021-04-28T19:54:30Z",
          "updatedAt": "2021-04-28T19:54:30Z"
        },
        {
          "author": "RyanTheOptimist",
          "authorAssociation": "NONE",
          "body": "Oh, and this text from the HTTP/3 docs is probably relevant:\r\n\r\n>    HTTP/3 relies on QUIC version 1 as the underlying transport.  The use\r\n>    of other QUIC transport versions with HTTP/3 MAY be defined by future\r\n>    specifications.\r\n",
          "createdAt": "2021-04-28T21:17:16Z",
          "updatedAt": "2021-04-28T21:17:16Z"
        }
      ]
    },
    {
      "number": 7,
      "id": "MDU6SXNzdWU4NzExODMzOTg=",
      "title": "Grease the packet type?",
      "url": "https://github.com/quicwg/quic-v2/issues/7",
      "state": "OPEN",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "It would be a simple matter to switch around the packet type codes in long headers, e.g.\r\n\r\n0x0 = Retry\r\n0x1 = Handshake\r\n0x2 = 0-RTT\r\n0x3 = Initial\r\n\r\nso no one ossifies on 0x0 = Initial.",
      "createdAt": "2021-04-29T15:58:09Z",
      "updatedAt": "2022-01-05T04:22:48Z",
      "closedAt": null,
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "I'm ambivalent on this.  It's fairly trivial to have the long header parsed in version-specific fashion, so it's easy to implement, but I'm not sure how much value it has.  It also makes reading packets slightly harder.",
          "createdAt": "2022-01-05T04:22:48Z",
          "updatedAt": "2022-01-05T04:22:48Z"
        }
      ]
    },
    {
      "number": 9,
      "id": "I_kwDOFX7TQc4-mBKB",
      "title": "Don't Change Labels",
      "url": "https://github.com/quicwg/quic-v2/issues/9",
      "state": "OPEN",
      "author": "nibanks",
      "authorAssociation": "MEMBER",
      "assignees": [],
      "labels": [],
      "body": "> The labels used in {{RFC9001}} to derive packet protection keys (Sec 5.1), header protection keys (Sec 5.4), Retry Integrity Tag keys (Sec 5.8), and key updates (Sec 6.1) change from \"quic key\" to \"quicv2 key\", from \"quic iv\" to \"quicv2 iv\", from \"quic hp\" to \"quicv2 hp\", and from \"quic ku\" to \"quicv2 ku,\" to meet the guidance for new versions in Section 9.6 of that document.\r\n\r\nDo we really need to change the labels? This will be a much bigger pain for me to integrate beyond the normal salt and retry secret changes that we regularly did for draft versions. What added benefit are the label changes giving?",
      "createdAt": "2021-11-10T18:15:31Z",
      "updatedAt": "2021-11-10T18:24:39Z",
      "closedAt": null,
      "comments": [
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "https://www.rfc-editor.org/rfc/rfc9001.html#key-diversity\r\n\r\nit's a SHOULD",
          "createdAt": "2021-11-10T18:22:14Z",
          "updatedAt": "2021-11-10T18:22:14Z"
        },
        {
          "author": "nibanks",
          "authorAssociation": "MEMBER",
          "body": "Ok. It's probably worth some more discussion. Personally, I'd rather follow the model we set with draft versions. At least, that's what MsQuic is setup to easily handle.",
          "createdAt": "2021-11-10T18:24:39Z",
          "updatedAt": "2021-11-10T18:24:39Z"
        }
      ]
    },
    {
      "number": 10,
      "id": "I_kwDOFX7TQc4-ukxt",
      "title": "Applicability of extensions",
      "url": "https://github.com/quicwg/quic-v2/issues/10",
      "state": "CLOSED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "The draft should state explicitly that all v1 extensions can be applied to v2 connections.",
      "createdAt": "2021-11-12T20:46:59Z",
      "updatedAt": "2021-11-22T23:06:26Z",
      "closedAt": "2021-11-22T23:06:26Z",
      "comments": []
    },
    {
      "number": 14,
      "id": "I_kwDOFX7TQc4_jV8O",
      "title": "Clarify about cross version 0-RTT via Compatible Version Negotiation",
      "url": "https://github.com/quicwg/quic-v2/issues/14",
      "state": "OPEN",
      "author": "flano-yuki",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "Thank you for this work.\r\n\r\nCan quic v2 server accept a v1 0-RTT packet via Compatible Version Negotiation?\r\n\r\nIf I understand correctly, The [version negotiation specification](https://quicwg.org/version-negotiation/draft-ietf-quic-version-negotiation.html#name-interaction-with-0-rtt) says that \"future versions will determine how to handle it.\" Even if the server accepts v1 packets as is, I would think the handling needs to be described in v2.",
      "createdAt": "2021-11-29T16:17:06Z",
      "updatedAt": "2022-01-05T06:08:11Z",
      "closedAt": null,
      "comments": [
        {
          "author": "kazu-yamamoto",
          "authorAssociation": "NONE",
          "body": "Developers are actually puzzled.\r\nSee https://github.com/quicwg/version-negotiation/issues/68",
          "createdAt": "2021-12-02T00:59:05Z",
          "updatedAt": "2021-12-02T00:59:05Z"
        },
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "Moving the discussion here, I think that 0-RTT is not as clear-cut as it seems.\r\n\r\nWhen doing a compatible upgrade from v1 to v2, a server makes the switch when it processes the ClientHello (that is, all Initial packets from the client to a first approximation).  It is relatively easy for the server to make the switch cleanly at that point because it doesn't need to read any more Initial packets and all other packets will be v2 from then on.\r\n\r\nA client makes the switch based on seeing a v2 packet.  It might receive some v1 Initial packets, but the one containing a ServerHello will be v2.  If the client is sending 0-RTT packets, it might need to send them until it receives all of the Handshake packets from the server.  That is, it might be some time.\r\n\r\nFor a client in that state, it doesn't really make sense to switch to sending v2 0-RTT packets, but if it doesn't it will be intermixing transmission of v1 0-RTT packets and v2 Handshake packets.  This is awkward because there is no clean cut-over.\r\n\r\nIn my implementation, I also have to deal with stack integration issues that make installing the right 0-RTT keys difficult.\r\n\r\nI ultimately opted to just reject 0-RTT if there was a version change.  The number of cases in which you might want to use 0-RTT and you don't already know what version the server wants to use are very limited.  Basically, this only happens if you are doing 0-RTT across an upgrade of the server.  Losing 0-RTT in that case seems tolerable.",
          "createdAt": "2022-01-05T06:08:11Z",
          "updatedAt": "2022-01-05T06:08:11Z"
        }
      ]
    },
    {
      "number": 15,
      "id": "I_kwDOFX7TQc4_2rCC",
      "title": "Need to specify the update process",
      "url": "https://github.com/quicwg/quic-v2/issues/15",
      "state": "OPEN",
      "author": "huitema",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "We now have some implementation experience, and got interop between 2 implementations. That's great, but the process was difficult because the transition is somehow under specified. There was a lot of discussion as issues with the compatible version negotiation draft:\r\n\r\n* [Specify impact on 0-RTT, session resume tickets, etc.](https://github.com/quicwg/version-negotiation/issues/68)\r\n* [Security issue when upgrading based on received version in header](https://github.com/quicwg/version-negotiation/issues/70)\r\n* [Validation on incompatible negotiation](https://github.com/quicwg/version-negotiation/issues/73)\r\n\r\nThese issues cannot be fully addressed in the compatible version negotiation draft, which has to be version independent. Instead, they need to be addressed in specific drafts. The V2 draft, for example, should specify exactly what happens during the version negotiation. My understanding is that when version negotiation succeeds, we will see something like:\r\n\r\n- Client sends a first flight composed of Version 1 initial packets\r\n- Server may send Version 1 initial packets containing acknowledgement, e.g., to manage losses of Initial packets\r\n- At some point, the server will have received and parsed the transport parameters, and decided to upgrade to V2\r\n- After that point, server will send version 2 packets (Initial, Handshake, 1RTT)\r\n- Client will receive version 2 packets and should be ready to process them before the negotiation completes\r\n- The transport parameters will arrive in V2 handshake packets, after which the negotiation is done.\r\n\r\nThere are quite a few potential issues that need resolution:\r\n\r\n1) As explained above, in case of successful negotiation, the client expects the server to start sending V2 packets asap. Shall it ignore V1 packets as soon as it received V2 packets? Should in check version numbers in Initial packets, in a process similar to key updates?\r\n2) If the client receives transport parameters on a version 2 packet, what shall it do if the chosen version is V1?\r\n3) And vice versa?\r\n4) If the server receives V2 handshake packets from the client, shall it conclude that the negotiation is successful?\r\n5) In case of session resumption, does the client resume using V1 or V2? I think the answer to that question depends on the content of the \"supported versions\" list provided by the server. If it includes V2, then the server is ready to receive V2 packets. If the server is part of a server farm with partial deployment of V2, it should not say that V2 is ready. The answer may also depend on local conditions at the client.\r\n6) If the client resumes using V1, it will send 0-RTT packets using V1. The server will receive these packets after the client's initial packets, and thus after receiving the transport parameters and completing the version upgrade. Should the server drop these packets? Or should it continue accept them until the handshake completes?\r\n7) On the client side, there will be a delay between completing the negotiation and finalizing the handshake. The client may want to send 0-RTT packets during that interval. Shall it send those using V1 or V2?\r\n\r\n\r\n",
      "createdAt": "2021-12-04T21:14:50Z",
      "updatedAt": "2021-12-08T06:50:22Z",
      "closedAt": null,
      "comments": [
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "The most literal answer to your question is, \"of course all v1 can be interchanged with v2, since they're identical\". But I'm going to answer the more interesting question of what precise questions a new version has to answer.\r\n\r\nAFAICT, in the v1->v2 case, (assuming all the support is present) there are four possible responses from the server:\r\n1) a v2 Initial with ACK and/or ServerHello\r\n2) a v1 Initial with ACK, followed by a v2 Initial with ServerHello\r\n3) a v1 Retry (a v2 Retry would also be correct, but silly for the server to do things that way)\r\n4) a v1 Initial with ACK, followed by nothing (because some of the client hello was lost)\r\nI believe this generalizes to all transitions v1->v_n.\r\n\r\nSo clearly the client can't draw any conclusions about the ultimate version until it sees the server hello, or a v2 packet of any kind. It can't fully authenticate the handshake until we get 1-RTT keys.\r\n\r\nSo to answer your questions:\r\n(1) yes, ignore v1 once you get v2 -- you don't need the Initial ACK anyway\r\n(2) and (3) if the chosen version in the TP doesn't match the QUIC header, this is a VN violation, no? Shouldn't this be handled in the VN draft?\r\n(4) I would think that any client packet with v2 and the correct keys would do the trick.\r\n(5) The two elements of this are the NEW_TOKEN token and the TLS session ticket. The hard part here is that the contents of this are not in any version spec; if QUIC and TLS implementations put version specific things in there, then it won't work. IIUC in general the session ticket wouldn't include anything derived from the version-dependent HKDF labels, so it ought to work.\r\n(6) and (7) I believe the server has to handle v1 0RTT till the handshake is over, as it can't guarantee that 0RTT arriving after the 2nd flight was sent after that flight. The client could switch its 0RTT to v2 once negotiated -- I have no strong opinion if that complexity is worthwhile.\r\n\r\nI don't think putting these responses in a PR is the right move -- I'd like to clarify what properly should go in the VN draft and what should rest here.",
          "createdAt": "2021-12-07T20:23:46Z",
          "updatedAt": "2021-12-07T20:23:46Z"
        },
        {
          "author": "kazu-yamamoto",
          "authorAssociation": "NONE",
          "body": "> (1) yes, ignore v1 once you get v2 -- you don't need the Initial ACK anyway\r\n\r\nMinor fix. In @huitema's example, ACK in V1 from the server is received by the client before any V2 packets. So, the client can handle it anyway.",
          "createdAt": "2021-12-08T01:47:33Z",
          "updatedAt": "2021-12-08T01:47:33Z"
        },
        {
          "author": "kazu-yamamoto",
          "authorAssociation": "NONE",
          "body": "> (6) and (7) I believe the server has to handle v1 0RTT till the handshake is over, as it can't guarantee that 0RTT arriving after the 2nd flight was sent after that flight. The client could switch its 0RTT to v2 once negotiated -- I have no strong opinion if that complexity is worthwhile.\r\n\r\nThis is probably a good idea. We can say that 0RTT belongs to the previous connection of V1.\r\n\r\n@huitema If you agree, let's implement this and do interop.",
          "createdAt": "2021-12-08T01:51:00Z",
          "updatedAt": "2021-12-08T01:51:00Z"
        },
        {
          "author": "kazu-yamamoto",
          "authorAssociation": "NONE",
          "body": "> a v1 Retry (a v2 Retry would also be correct, but silly for the server to do things that way)\r\n\r\nWe need to prohibit v2 Retry since a v1-only client cannot retry if v2 Retry is received.",
          "createdAt": "2021-12-08T01:57:44Z",
          "updatedAt": "2021-12-08T01:57:44Z"
        },
        {
          "author": "kazu-yamamoto",
          "authorAssociation": "NONE",
          "body": "> If the client receives transport parameters on a version 2 packet, what shall it do if the chosen version is V1?\r\n\r\nWhen a client see V2 in a long header, it switches to V2 keys. This switch is allowed only once. After handshake is completed, the client checks if the version for keys and Chosen Version is the same.",
          "createdAt": "2021-12-08T02:01:13Z",
          "updatedAt": "2021-12-08T02:01:13Z"
        },
        {
          "author": "huitema",
          "authorAssociation": "NONE",
          "body": "OK, I will test the 0-RTT part internally first. There are timing issues in the server code, depending on whether the 0-RTT key is produced before the negotiation or after it.",
          "createdAt": "2021-12-08T05:55:37Z",
          "updatedAt": "2021-12-08T05:55:37Z"
        },
        {
          "author": "kazu-yamamoto",
          "authorAssociation": "NONE",
          "body": "@huitema The idea for 0-RTT works perfectly on my local tests. I will brush up the code tomorrow and set up a public server.",
          "createdAt": "2021-12-08T06:50:22Z",
          "updatedAt": "2021-12-08T06:50:22Z"
        }
      ]
    },
    {
      "number": 17,
      "id": "I_kwDOFX7TQc5ABJPl",
      "title": "Test vectors",
      "url": "https://github.com/quicwg/quic-v2/issues/17",
      "state": "OPEN",
      "author": "martinthomson",
      "authorAssociation": "MEMBER",
      "assignees": [],
      "labels": [],
      "body": "RFC 9001 had 'em and they were very helpful.\r\n\r\nYou might find [this script](https://gist.github.com/martinthomson/1f000d3e389b0bf1308e1043e141fbb9) to be useful.",
      "createdAt": "2021-12-08T05:59:38Z",
      "updatedAt": "2021-12-08T06:01:37Z",
      "closedAt": null,
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "Note that the TLS messages in that script hasn't been changed to include the version negotiation transport parameters.  If you want to publish it, then you'll need to work out how to do that, sorry.",
          "createdAt": "2021-12-08T06:01:36Z",
          "updatedAt": "2021-12-08T06:01:36Z"
        }
      ]
    },
    {
      "number": 20,
      "id": "I_kwDOFX7TQc5BMmLL",
      "title": "Request provisional version number allocation",
      "url": "https://github.com/quicwg/quic-v2/issues/20",
      "state": "OPEN",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Get one from IANA",
      "createdAt": "2022-01-04T23:00:59Z",
      "updatedAt": "2022-01-04T23:01:44Z",
      "closedAt": null,
      "comments": [
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "I'll ask for 0x70 9a 50 c4 .",
          "createdAt": "2022-01-04T23:01:44Z",
          "updatedAt": "2022-01-04T23:01:44Z"
        }
      ]
    },
    {
      "number": 21,
      "id": "I_kwDOFX7TQc5BMmti",
      "title": "Packet injection during Compatible VN",
      "url": "https://github.com/quicwg/quic-v2/issues/21",
      "state": "OPEN",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "There might be security considerations related to injecting packets during compatible VN. They may not be worse than other Initial injection attacks, but think it through.",
      "createdAt": "2022-01-04T23:05:12Z",
      "updatedAt": "2022-01-04T23:05:12Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 23,
      "id": "I_kwDOFX7TQc5BM45Y",
      "title": "Retry and compatible upgrade",
      "url": "https://github.com/quicwg/quic-v2/issues/23",
      "state": "OPEN",
      "author": "martinthomson",
      "authorAssociation": "MEMBER",
      "assignees": [],
      "labels": [],
      "body": "It is necessary to specify how retry works when a compatible upgrade is used.\r\n\r\nThe easiest way to specify this is to say that Retry can be sent in version 1, but the validation is performed as though a version 2 retry was sent.  That's what I've seen implemented thus far.",
      "createdAt": "2022-01-05T01:40:11Z",
      "updatedAt": "2022-01-05T01:40:11Z",
      "closedAt": null,
      "comments": []
    }
  ],
  "pulls": [
    {
      "number": 6,
      "id": "MDExOlB1bGxSZXF1ZXN0NjI1MzcxNjkz",
      "title": "alpn text",
      "url": "https://github.com/quicwg/quic-v2/pull/6",
      "state": "MERGED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "One way to fix #5 ",
      "createdAt": "2021-04-28T16:18:08Z",
      "updatedAt": "2021-06-02T18:22:48Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "eb1b70ee4e069483599e798a9432bc1fc7c7a120",
      "headRepository": "quicwg/quic-v2",
      "headRefName": "alpn",
      "headRefOid": "9e74378765f92e4dd7d1da6897cf6241ec7cd8b5",
      "closedAt": "2021-06-02T18:22:48Z",
      "mergedAt": "2021-06-02T18:22:48Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "0abe99f92456b09314e786b6e271bcec66ce76d5"
      },
      "comments": [
        {
          "author": "MikeBishop",
          "authorAssociation": "NONE",
          "body": "I have a feeling you'll need to say that this \"updates\" HTTP/3.",
          "createdAt": "2021-04-28T20:55:36Z",
          "updatedAt": "2021-04-28T20:55:36Z"
        }
      ],
      "reviews": []
    },
    {
      "number": 8,
      "id": "MDExOlB1bGxSZXF1ZXN0NjYwMjkxMzE5",
      "title": "sync with main",
      "url": "https://github.com/quicwg/quic-v2/pull/8",
      "state": "MERGED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2021-06-02T18:21:50Z",
      "updatedAt": "2021-06-02T18:23:33Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "alpn",
      "baseRefOid": "9e74378765f92e4dd7d1da6897cf6241ec7cd8b5",
      "headRepository": "quicwg/quic-v2",
      "headRefName": "main",
      "headRefOid": "0abe99f92456b09314e786b6e271bcec66ce76d5",
      "closedAt": "2021-06-02T18:23:33Z",
      "mergedAt": "2021-06-02T18:23:33Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "68020698e4d9fe9db02478ff6751fb474b3a5534"
      },
      "comments": [],
      "reviews": []
    },
    {
      "number": 11,
      "id": "PR_kwDOFX7TQc4u4M6d",
      "title": "convert filename to -ietf",
      "url": "https://github.com/quicwg/quic-v2/pull/11",
      "state": "MERGED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2021-11-22T22:53:42Z",
      "updatedAt": "2022-01-04T21:19:41Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "79f0607cbbf8331a6ee6d2705fa00ca39909d49d",
      "headRepository": "quicwg/quic-v2",
      "headRefName": "update-name",
      "headRefOid": "030e4774e787009a9ad6cfd9c6fec7981bbb11ca",
      "closedAt": "2021-11-22T22:54:37Z",
      "mergedAt": "2021-11-22T22:54:37Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "88132694f806e3a1ed76e5d3a4cef05eb565b42c"
      },
      "comments": [],
      "reviews": []
    },
    {
      "number": 12,
      "id": "PR_kwDOFX7TQc4u4OZW",
      "title": "Fix #10: support all extensions",
      "url": "https://github.com/quicwg/quic-v2/pull/12",
      "state": "MERGED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2021-11-22T23:05:40Z",
      "updatedAt": "2022-01-04T21:19:42Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "a834768d2dddaab2b77478e3bb4b9b68be4c0fd4",
      "headRepository": "quicwg/quic-v2",
      "headRefName": "extensions",
      "headRefOid": "420ffc320bf70441b6f18de0af2cec3ef0ccdffe",
      "closedAt": "2021-11-22T23:06:25Z",
      "mergedAt": "2021-11-22T23:06:25Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "287bdcf88a2ff8fdb257ef6d8e60b59d62ad0421"
      },
      "comments": [],
      "reviews": []
    },
    {
      "number": 13,
      "id": "PR_kwDOFX7TQc4u7Fp3",
      "title": "Fix typo in Key Updates label",
      "url": "https://github.com/quicwg/quic-v2/pull/13",
      "state": "MERGED",
      "author": "IvanNardi",
      "authorAssociation": "CONTRIBUTOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2021-11-23T18:35:53Z",
      "updatedAt": "2021-11-23T18:51:15Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "9d29f07d8743238c363c278c68f72715c5efec5b",
      "headRepository": "IvanNardi/quic-v2",
      "headRefName": "key-update",
      "headRefOid": "64ac9f36cae4ec2057485ef65b81a65f8b2df1dd",
      "closedAt": "2021-11-23T18:43:15Z",
      "mergedAt": "2021-11-23T18:43:14Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "4557dc73f1b3caa8f7b81077791babd6d6f5f153"
      },
      "comments": [],
      "reviews": [
        {
          "id": "PRR_kwDOFX7TQc4whW_k",
          "commit": {
            "abbreviatedOid": "64ac9f3"
          },
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "state": "APPROVED",
          "body": "",
          "createdAt": "2021-11-23T18:41:37Z",
          "updatedAt": "2021-11-23T18:41:37Z",
          "comments": []
        }
      ]
    },
    {
      "number": 16,
      "id": "PR_kwDOFX7TQc4viLq5",
      "title": "Semi-automatic update of venue information",
      "url": "https://github.com/quicwg/quic-v2/pull/16",
      "state": "MERGED",
      "author": "martinthomson",
      "authorAssociation": "MEMBER",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2021-12-08T05:00:29Z",
      "updatedAt": "2021-12-08T05:03:29Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "4557dc73f1b3caa8f7b81077791babd6d6f5f153",
      "headRepository": "martinthomson/quic-v2",
      "headRefName": "venue",
      "headRefOid": "8fb8a54a80a4160e3eed2210cca624315096409b",
      "closedAt": "2021-12-08T05:03:29Z",
      "mergedAt": "2021-12-08T05:03:29Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "a9ffd031aa43cd913b9b7b3d5e1dbdee8ad8a93e"
      },
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "(If you are looking to do this for yourself on other repos, you can copy the venue fields from https://github.com/martinthomson/internet-draft-template/blob/main/draft-todo-yourname-protocol.md into your draft and run `make update-venue`.)",
          "createdAt": "2021-12-08T05:01:22Z",
          "updatedAt": "2021-12-08T05:01:22Z"
        }
      ],
      "reviews": []
    },
    {
      "number": 18,
      "id": "PR_kwDOFX7TQc4wh8yj",
      "title": "change author affiliation",
      "url": "https://github.com/quicwg/quic-v2/pull/18",
      "state": "MERGED",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2022-01-04T21:13:38Z",
      "updatedAt": "2022-01-04T21:19:39Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "a9ffd031aa43cd913b9b7b3d5e1dbdee8ad8a93e",
      "headRepository": "quicwg/quic-v2",
      "headRefName": "author",
      "headRefOid": "ba2723ed32b526669e18dc92a05f8e030881761b",
      "closedAt": "2022-01-04T21:18:17Z",
      "mergedAt": "2022-01-04T21:18:17Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "4e7ae98a2ec5089139693b7135a0ebcbc5177c0c"
      },
      "comments": [],
      "reviews": []
    },
    {
      "number": 19,
      "id": "PR_kwDOFX7TQc4wiJlU",
      "title": "Rules for compatible VN",
      "url": "https://github.com/quicwg/quic-v2/pull/19",
      "state": "OPEN",
      "author": "martinduke",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Fixes #14 and fixes #15.\r\n\r\nI could be persuaded that some of the choices made here are not the best.",
      "createdAt": "2022-01-04T22:58:16Z",
      "updatedAt": "2022-01-05T03:00:39Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "4e7ae98a2ec5089139693b7135a0ebcbc5177c0c",
      "headRepository": "quicwg/quic-v2",
      "headRefName": "update-narrative",
      "headRefOid": "5cfe3115d2587d83f554b9d1d6c8ae8517c43fa1",
      "closedAt": null,
      "mergedAt": null,
      "mergedBy": null,
      "mergeCommit": null,
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "Oops, I posted #24, which is almost exactly the same.  My bad.\r\n\r\nThe 0-RTT thing is one I might contest here.  It is possible to accept 0-RTT if you have a compatible upgrade, but I'm not sure that you ever need it.  The situations in which you can use 0-RTT without knowing what version is in use are few.  All the client has to do is remember the negotiated version from last time and use that version.",
          "createdAt": "2022-01-05T03:00:39Z",
          "updatedAt": "2022-01-05T03:00:39Z"
        }
      ],
      "reviews": [
        {
          "id": "PRR_kwDOFX7TQc4yT7U-",
          "commit": {
            "abbreviatedOid": "5cfe311"
          },
          "author": "huitema",
          "authorAssociation": "NONE",
          "state": "COMMENTED",
          "body": "The text reflects the consensus so far. I have to update my implementation to ensure that it follows these rules exactly, in particular for 0RTT, might add comments when that implementation is tested.",
          "createdAt": "2022-01-04T23:04:56Z",
          "updatedAt": "2022-01-04T23:04:56Z",
          "comments": []
        }
      ]
    },
    {
      "number": 22,
      "id": "PR_kwDOFX7TQc4wiZd4",
      "title": "Improve cross referencing",
      "url": "https://github.com/quicwg/quic-v2/pull/22",
      "state": "MERGED",
      "author": "martinthomson",
      "authorAssociation": "MEMBER",
      "assignees": [],
      "labels": [],
      "body": "This uses kramdown tricks to make real links for the section references\r\nto RFC 9001 and uses a nicer label for those.",
      "createdAt": "2022-01-05T01:37:37Z",
      "updatedAt": "2022-01-05T02:51:15Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "4e7ae98a2ec5089139693b7135a0ebcbc5177c0c",
      "headRepository": "martinthomson/quic-v2",
      "headRefName": "xrefs",
      "headRefOid": "9b7450a80cd33ea93f81756cbe75b7443a895a50",
      "closedAt": "2022-01-05T02:51:15Z",
      "mergedAt": "2022-01-05T02:51:15Z",
      "mergedBy": "martinduke",
      "mergeCommit": {
        "oid": "a28650478ef0dc3886d786ba31b810ec3fc830de"
      },
      "comments": [],
      "reviews": [
        {
          "id": "PRR_kwDOFX7TQc4yURPY",
          "commit": {
            "abbreviatedOid": "9b7450a"
          },
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "state": "APPROVED",
          "body": "",
          "createdAt": "2022-01-05T02:51:05Z",
          "updatedAt": "2022-01-05T02:51:05Z",
          "comments": []
        }
      ]
    },
    {
      "number": 24,
      "id": "PR_kwDOFX7TQc4wibB1",
      "title": "What I learned about compatible versions",
      "url": "https://github.com/quicwg/quic-v2/pull/24",
      "state": "OPEN",
      "author": "martinthomson",
      "authorAssociation": "MEMBER",
      "assignees": [],
      "labels": [],
      "body": "This is what the version negotiation draft requires of a document that\r\ndefines compatible version negotiation.  The answers I've used here are\r\nbased on my own experience implementing this.  Others might have a\r\ndifferent experience.\r\n\r\nCloses #23.",
      "createdAt": "2022-01-05T01:58:15Z",
      "updatedAt": "2022-01-05T22:50:46Z",
      "baseRepository": "quicwg/quic-v2",
      "baseRefName": "main",
      "baseRefOid": "4e7ae98a2ec5089139693b7135a0ebcbc5177c0c",
      "headRepository": "martinthomson/quic-v2",
      "headRefName": "vn",
      "headRefOid": "38717e81b0b7c83204ed75ac4b33e34802e7fe36",
      "closedAt": null,
      "mergedAt": null,
      "mergedBy": null,
      "mergeCommit": null,
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "body": "@huitema, does this match your understanding?",
          "createdAt": "2022-01-05T01:59:06Z",
          "updatedAt": "2022-01-05T01:59:06Z"
        },
        {
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "body": "Oh, I see the Retry bit now",
          "createdAt": "2022-01-05T03:27:12Z",
          "updatedAt": "2022-01-05T03:27:12Z"
        }
      ],
      "reviews": [
        {
          "id": "PRR_kwDOFX7TQc4yURs8",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "state": "COMMENTED",
          "body": "Huh. #19 and #24 post the same day. @huitema suggested #19 matches his experience.\r\n\r\nAlso, this doesn't seem to address the bit about Retry validation in #23?\r\n\r\nTomorrow I can see if there's anything to synthesize between the two.",
          "createdAt": "2022-01-05T02:56:29Z",
          "updatedAt": "2022-01-05T02:56:29Z",
          "comments": []
        },
        {
          "id": "PRR_kwDOFX7TQc4yURxM",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "martinduke",
          "authorAssociation": "COLLABORATOR",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T02:57:17Z",
          "updatedAt": "2022-01-05T02:58:02Z",
          "comments": [
            {
              "originalPosition": 26,
              "body": "Given the differing labels, all the protection is different, no?",
              "createdAt": "2022-01-05T02:57:17Z",
              "updatedAt": "2022-01-05T02:58:02Z"
            },
            {
              "originalPosition": 40,
              "body": "Is there a reason for this? It seems like a disincentive to upgrade.",
              "createdAt": "2022-01-05T02:57:58Z",
              "updatedAt": "2022-01-05T02:58:02Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOFX7TQc4yUSKC",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T03:01:28Z",
          "updatedAt": "2022-01-05T03:01:28Z",
          "comments": [
            {
              "originalPosition": 26,
              "body": "Good point.",
              "createdAt": "2022-01-05T03:01:28Z",
              "updatedAt": "2022-01-05T03:01:28Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOFX7TQc4yUSiM",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T03:05:19Z",
          "updatedAt": "2022-01-05T03:05:19Z",
          "comments": [
            {
              "originalPosition": 40,
              "body": "Maybe.  Though the number of cases where you get to deploy a whole new version and continue to use 0-RTT across the upgrade is small.  You will mostly have a previous connection in the negotiated version, so you can remember which was used and attempt that straight up.  It is only during the rollout of v2 that you need to worry about maybe accepting v2 and rejecting 0-RTT.\r\n\r\nIn our stack, it is completely non-trivial to calculate v1 0-RTT keys once you have negotiated v2.  Given how narrow the applicability is, it seems much safer to reject.\r\n\r\nOf course, you could just make rejection discretionary.",
              "createdAt": "2022-01-05T03:05:19Z",
              "updatedAt": "2022-01-05T03:05:19Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOFX7TQc4yUVdH",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "huitema",
          "authorAssociation": "NONE",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T03:42:08Z",
          "updatedAt": "2022-01-05T03:42:08Z",
          "comments": [
            {
              "originalPosition": 40,
              "body": "Let see. To Martin's point, I have only partially tested usage of 0-RTT with resumption, always resuming with V1.\r\n\r\nA server negotiates 0-RTT if it has received a session resumption ticket during the previous handshake. Session tickets are carried in crypto frames in 1-RTT packets, thus after the transport parameters have been negotiated. It seems we can have the following:\r\n\r\n1) Client initiates a V1 session, also proposes V2, server negotiates V2, indicates V2 support, and sends a resumption ticket.\r\n\r\n2) Client initiates a V1 session, also proposes V2, server negotiates V2, does not indicates V2 support, and sends a resumption ticket.\r\n\r\n3) Client initiates a V1 session, also proposes V2, server negotiates V1 and sends a resumption ticket.\r\n\r\n4) Client initiates a V1 session, does not propose alternative. Server sends a resumption ticket.\r\n\r\nIt seems to me that in case #1, the client should resume a session using V2, including for 0-RTT. In case #2, #3 and #4, it should resume using V1. Case #4 is plain V1, which implies support of 0-RTT. It would be bizarre to allow 0RTT in case #4 but not in cases #2 and #3.",
              "createdAt": "2022-01-05T03:42:08Z",
              "updatedAt": "2022-01-05T03:42:08Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOFX7TQc4yUWHz",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T03:50:00Z",
          "updatedAt": "2022-01-05T03:50:01Z",
          "comments": [
            {
              "originalPosition": 40,
              "body": "I'm not following case 2.  Did you mean that the server negotiates v2, but does not support v1?  You can't use compatible negotiation for that, I think.\r\n\r\nCases 3 and 4 are clear cut cases where the only mutually supported version is v1, just that one has VN support and the other doesn't.\r\n\r\nThe case that is potentially interesting is this: Client offers v1 and v2.  Server only supports v1 so it uses that and sends a 0-RTT-capable ticket.  Server upgrades to add v2 support.  Client then makes a new connection with v1 and 0-RTT.  Server is forced to choose between a compatible upgrade and 0-RTT.",
              "createdAt": "2022-01-05T03:50:01Z",
              "updatedAt": "2022-01-05T03:50:01Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOFX7TQc4yXmlr",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "huitema",
          "authorAssociation": "NONE",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T20:46:35Z",
          "updatedAt": "2022-01-05T20:46:36Z",
          "comments": [
            {
              "originalPosition": 40,
              "body": "The server response contains the selected version and a list of supported versions. Case #2 happens when the selected version is V2, but the list of supported versions only contains V1. That would be a reasonable thing to do by a server in a big farm. The server itself supports V2, but not all servers in the farm do, so the server is telling the client that it would be reasonable to use V1 in the new connections.",
              "createdAt": "2022-01-05T20:46:35Z",
              "updatedAt": "2022-01-05T20:46:48Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOFX7TQc4yX8SY",
          "commit": {
            "abbreviatedOid": "38717e8"
          },
          "author": "martinthomson",
          "authorAssociation": "MEMBER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2022-01-05T22:50:46Z",
          "updatedAt": "2022-01-05T22:50:46Z",
          "comments": [
            {
              "originalPosition": 40,
              "body": "Good point.  I missed that nuance.  That increases the potential value of doing 0-RTT in the original version.",
              "createdAt": "2022-01-05T22:50:46Z",
              "updatedAt": "2022-01-05T22:50:46Z"
            }
          ]
        }
      ]
    }
  ]
}